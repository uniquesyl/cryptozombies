# CryptoZombies 技术架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户界面层                                │
├─────────────────────────────────────────────────────────────────┤
│  Next.js 15 + TypeScript + Tailwind CSS                        │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│  │   首页      │ │  我的僵尸   │ │   战斗页    │              │
│  └─────────────┘ └─────────────┘ └─────────────┘              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│  │  创建僵尸   │ │  僵尸详情   │ │  钱包连接   │              │
│  └─────────────┘ └─────────────┘ └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        React Hooks 层                          │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│  │  useWeb3    │ │ useContract │ │ useGameState│              │
│  │             │ │             │ │             │              │
│  │ • 钱包连接  │ │ • 合约交互  │ │ • 状态管理  │              │
│  │ • 网络检测  │ │ • 交易发送  │ │ • 数据同步  │              │
│  │ • 账户管理  │ │ • 事件监听  │ │ • 缓存管理  │              │
│  └─────────────┘ └─────────────┘ └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        Web3 集成层                              │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│  │ Ethers.js   │ │ MetaMask    │ │ 合约配置    │              │
│  │             │ │             │ │             │              │
│  │ • Provider  │ │ • 钱包连接  │ │ • ABI定义   │              │
│  │ • Signer    │ │ • 网络切换  │ │ • 合约地址  │              │
│  │ • Contract  │ │ • 交易签名  │ │ • 事件定义  │              │
│  └─────────────┘ └─────────────┘ └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        区块链层                                 │
├─────────────────────────────────────────────────────────────────┤
│                    Ethereum Sepolia 测试网                      │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    智能合约系统                              │ │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │ │
│  │  │ZombieFactory│ │ZombieAttack │ │ZombieOwnership│         │ │
│  │  │             │ │             │ │             │          │ │
│  │  │ • 创建僵尸  │ │ • 战斗逻辑  │ │ • NFT标准   │          │ │
│  │  │ • DNA生成   │ │ • 冷却机制  │ │ • 所有权管理│          │ │
│  │  │ • 随机数    │ │ • 经验系统  │ │ • 转账功能  │          │ │
│  │  └─────────────┘ └─────────────┘ └─────────────┘          │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        部署层                                   │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐              │
│  │   GitHub    │ │AWS Amplify  │ │ CloudFront  │              │
│  │             │ │             │ │             │              │
│  │ • 代码仓库  │ │ • 自动构建  │ │ • CDN加速   │              │
│  │ • 版本控制  │ │ • 自动部署  │ │ • 全球分发  │              │
│  │ • CI/CD     │ │ • 环境管理  │ │ • 缓存优化  │              │
│  └─────────────┘ └─────────────┘ └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
```

## 架构特点

### 1. 分层架构设计

- **表现层**: Next.js + TypeScript + Tailwind CSS
- **业务逻辑层**: React Hooks + 自定义状态管理
- **数据访问层**: Ethers.js + Web3 集成
- **区块链层**: Solidity 智能合约
- **部署层**: AWS 云服务

### 2. 技术栈优势

- **前端**: Next.js 提供 SSR/SSG、路由管理、性能优化
- **类型安全**: TypeScript 确保代码质量和开发体验
- **样式**: Tailwind CSS 提供快速开发和响应式设计
- **Web3**: Ethers.js 提供完整的以太坊交互能力
- **部署**: AWS Amplify 提供自动化部署和扩展能力

### 3. 数据流

```
用户操作 → React组件 → 自定义Hooks → Ethers.js → 智能合约 → 区块链
                ↓
            状态更新 → UI渲染 → 用户反馈
```

### 4. 安全机制

- **钱包安全**: MetaMask 交易签名验证
- **合约安全**: 权限控制和重入攻击防护
- **网络安全**: HTTPS 强制和 CSP 策略
- **前端安全**: 输入验证和 XSS 防护

### 5. 性能优化

- **静态生成**: Next.js 静态导出减少服务器负载
- **代码分割**: 按需加载减少初始包大小
- **缓存策略**: 智能缓存提升用户体验
- **CDN 加速**: CloudFront 全球内容分发

这个架构设计确保了项目的可扩展性、可维护性和高性能。
